!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).vec={})}(this,(function(t){"use strict";class e extends Array{get[Symbol.toStringTag](){return"Array"}static get[Symbol.species](){return e}}function r(){return new e}function n(t){return"object"==typeof t&&null!=t?Object.prototype.toString.call(t):""}function o(t){return null==t}function i(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===n(t)}function c(t){return"bigint"==typeof t||"[object BigInt]"===n(t)}function u(t){return"symbol"==typeof t||"[object Symbol]"===n(t)}function h(t){return"string"==typeof t||"[object String]"===n(t)}function a(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}function l(t){return!o(t)}function f(t){return!i(t)}function p(t){return"function"==typeof t}function y(t){return l(t)&&"GeneratorFunction"===t[Symbol.toStringTag]}function g(t,e="value"){if(null==t||void 0===t)throw new TypeError(`${e} is null or not defined.`)}function d(t,e="value"){if(!p(t))throw new TypeError(`${e} is not a function.`)}function w(t,e="value"){if(!Number.isFinite(t)||t<0)throw new TypeError(`${e} must be a non-negative number.`)}function b(t,e="value"){if(y(t))throw new TypeError(`${e} is a generator function. It should be a normal function.`)}var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var _=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var r="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",i="[object Array]",s="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",a="[object Map]",l="[object Number]",f="[object Object]",p="[object Promise]",y="[object RegExp]",g="[object Set]",d="[object String]",w="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",A="[object DataView]",j=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[o]=E[i]=E[_]=E[s]=E[A]=E[c]=E[u]=E[h]=E[a]=E[l]=E[f]=E[y]=E[g]=E[d]=E[b]=!1;var T="object"==typeof v&&v&&v.Object===Object&&v,V="object"==typeof self&&self&&self.Object===Object&&self,z=T||V||Function("return this")(),S=e&&!e.nodeType&&e,O=S&&t&&!t.nodeType&&t,k=O&&O.exports===S,x=k&&T.process,B=function(){try{return x&&x.binding&&x.binding("util")}catch(t){}}(),M=B&&B.isTypedArray;function F(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function $(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function I(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var P,R,U,N=Array.prototype,L=Function.prototype,W=Object.prototype,D=z["__core-js_shared__"],G=L.toString,C=W.hasOwnProperty,q=(P=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",H=W.toString,J=RegExp("^"+G.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=k?z.Buffer:void 0,Q=z.Symbol,X=z.Uint8Array,Y=W.propertyIsEnumerable,Z=N.splice,tt=Q?Q.toStringTag:void 0,et=Object.getOwnPropertySymbols,rt=K?K.isBuffer:void 0,nt=(R=Object.keys,U=Object,function(t){return R(U(t))}),ot=Bt(z,"DataView"),it=Bt(z,"Map"),st=Bt(z,"Promise"),ct=Bt(z,"Set"),ut=Bt(z,"WeakMap"),ht=Bt(Object,"create"),at=It(ot),lt=It(it),ft=It(st),pt=It(ct),yt=It(ut),gt=Q?Q.prototype:void 0,dt=gt?gt.valueOf:void 0;function wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function _t(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new vt;++e<r;)this.add(t[e])}function At(t){var e=this.__data__=new bt(t);this.size=e.size}function jt(t,e){var r=Ut(t),n=!r&&Rt(t),o=!r&&!n&&Nt(t),i=!r&&!n&&!o&&Ct(t),s=r||n||o||i,c=s?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var h in t)!e&&!C.call(t,h)||s&&("length"==h||o&&("offset"==h||"parent"==h)||i&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||$t(h,u))||c.push(h);return c}function mt(t,e){for(var r=t.length;r--;)if(Pt(t[r][0],e))return r;return-1}function Et(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":tt&&tt in Object(t)?function(t){var e=C.call(t,tt),r=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var o=H.call(t);n&&(e?t[tt]=r:delete t[tt]);return o}(t):function(t){return H.call(t)}(t)}function Tt(t){return Gt(t)&&Et(t)==o}function Vt(t,e,r,n,h){return t===e||(null==t||null==e||!Gt(t)&&!Gt(e)?t!=t&&e!=e:function(t,e,r,n,h,p){var b=Ut(t),v=Ut(e),j=b?i:Ft(t),m=v?i:Ft(e),E=(j=j==o?f:j)==f,T=(m=m==o?f:m)==f,V=j==m;if(V&&Nt(t)){if(!Nt(e))return!1;b=!0,E=!1}if(V&&!E)return p||(p=new At),b||Ct(t)?Ot(t,e,r,n,h,p):function(t,e,r,n,o,i,h){switch(r){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!i(new X(t),new X(e)));case s:case c:case l:return Pt(+t,+e);case u:return t.name==e.name&&t.message==e.message;case y:case d:return t==e+"";case a:var f=$;case g:var p=1&n;if(f||(f=I),t.size!=e.size&&!p)return!1;var b=h.get(t);if(b)return b==e;n|=2,h.set(t,e);var v=Ot(f(t),f(e),n,o,i,h);return h.delete(t),v;case w:if(dt)return dt.call(t)==dt.call(e)}return!1}(t,e,j,r,n,h,p);if(!(1&r)){var z=E&&C.call(t,"__wrapped__"),S=T&&C.call(e,"__wrapped__");if(z||S){var O=z?t.value():t,k=S?e.value():e;return p||(p=new At),h(O,k,r,n,p)}}if(!V)return!1;return p||(p=new At),function(t,e,r,n,o,i){var s=1&r,c=kt(t),u=c.length,h=kt(e).length;if(u!=h&&!s)return!1;var a=u;for(;a--;){var l=c[a];if(!(s?l in e:C.call(e,l)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var p=!0;i.set(t,e),i.set(e,t);var y=s;for(;++a<u;){var g=t[l=c[a]],d=e[l];if(n)var w=s?n(d,g,l,e,t,i):n(g,d,l,t,e,i);if(!(void 0===w?g===d||o(g,d,r,n,i):w)){p=!1;break}y||(y="constructor"==l)}if(p&&!y){var b=t.constructor,v=e.constructor;b==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,r,n,h,p)}(t,e,r,n,Vt,h))}function zt(t){return!(!Dt(t)||function(t){return!!q&&q in t}(t))&&(Lt(t)?J:j).test(It(t))}function St(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||W,e!==n)return nt(t);var e,r,n,o=[];for(var i in Object(t))C.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Ot(t,e,r,n,o,i){var s=1&r,c=t.length,u=e.length;if(c!=u&&!(s&&u>c))return!1;var h=i.get(t);if(h&&i.get(e))return h==e;var a=-1,l=!0,f=2&r?new _t:void 0;for(i.set(t,e),i.set(e,t);++a<c;){var p=t[a],y=e[a];if(n)var g=s?n(y,p,a,e,t,i):n(p,y,a,t,e,i);if(void 0!==g){if(g)continue;l=!1;break}if(f){if(!F(e,(function(t,e){if(s=e,!f.has(s)&&(p===t||o(p,t,r,n,i)))return f.push(e);var s}))){l=!1;break}}else if(p!==y&&!o(p,y,r,n,i)){l=!1;break}}return i.delete(t),i.delete(e),l}function kt(t){return function(t,e,r){var n=e(t);return Ut(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,qt,Mt)}function xt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Bt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return zt(r)?r:void 0}wt.prototype.clear=function(){this.__data__=ht?ht(null):{},this.size=0},wt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wt.prototype.get=function(t){var e=this.__data__;if(ht){var n=e[t];return n===r?void 0:n}return C.call(e,t)?e[t]:void 0},wt.prototype.has=function(t){var e=this.__data__;return ht?void 0!==e[t]:C.call(e,t)},wt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ht&&void 0===e?r:e,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(t){var e=this.__data__,r=mt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Z.call(e,r,1),--this.size,!0)},bt.prototype.get=function(t){var e=this.__data__,r=mt(e,t);return r<0?void 0:e[r][1]},bt.prototype.has=function(t){return mt(this.__data__,t)>-1},bt.prototype.set=function(t,e){var r=this.__data__,n=mt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},vt.prototype.clear=function(){this.size=0,this.__data__={hash:new wt,map:new(it||bt),string:new wt}},vt.prototype.delete=function(t){var e=xt(this,t).delete(t);return this.size-=e?1:0,e},vt.prototype.get=function(t){return xt(this,t).get(t)},vt.prototype.has=function(t){return xt(this,t).has(t)},vt.prototype.set=function(t,e){var r=xt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,r),this},_t.prototype.has=function(t){return this.__data__.has(t)},At.prototype.clear=function(){this.__data__=new bt,this.size=0},At.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof bt){var n=r.__data__;if(!it||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new vt(n)}return r.set(t,e),this.size=r.size,this};var Mt=et?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i}(et(t),(function(e){return Y.call(t,e)})))}:function(){return[]},Ft=Et;function $t(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<e}function It(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Pt(t,e){return t===e||t!=t&&e!=e}(ot&&Ft(new ot(new ArrayBuffer(1)))!=A||it&&Ft(new it)!=a||st&&Ft(st.resolve())!=p||ct&&Ft(new ct)!=g||ut&&Ft(new ut)!=b)&&(Ft=function(t){var e=Et(t),r=e==f?t.constructor:void 0,n=r?It(r):"";if(n)switch(n){case at:return A;case lt:return a;case ft:return p;case pt:return g;case yt:return b}return e});var Rt=Tt(function(){return arguments}())?Tt:function(t){return Gt(t)&&C.call(t,"callee")&&!Y.call(t,"callee")},Ut=Array.isArray;var Nt=rt||function(){return!1};function Lt(t){if(!Dt(t))return!1;var e=Et(t);return e==h||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function Dt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Gt(t){return null!=t&&"object"==typeof t}var Ct=M?function(t){return function(e){return t(e)}}(M):function(t){return Gt(t)&&Wt(t.length)&&!!E[Et(t)]};function qt(t){return null!=(e=t)&&Wt(e.length)&&!Lt(e)?jt(t):St(t);var e}t.exports=function(t,e){return Vt(t,e)}}));function A(t,n){w(t,"count");const o=Math.floor(t);if(0===o)return r();const i=new e;for(let t=0;t<o;t+=1)i.push(n);return i}e.empty=r,e.init=function(t,n){w(t,"count"),d(n,"initializer"),b(n,"initializer");const o=Math.floor(t);if(0===o)return r();const i=new e;for(let t=0;t<o;t+=1)i.push(n(t));return i},e.create=A,e.isVec=function(t){return"[object Vec]"===Object.prototype.toString.call(t)},e.some2=function(t,r,n){if(d(t,"predicate"),b(t,"predicate"),g(r,"source1"),g(n,"source2"),!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source1 should be Array or Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source2 should be Array or Vec.");if(r.length!==n.length)throw new TypeError("source1 and source2 have different lengths.");return function e(o){return o<r.length&&(t(r[o],n[o])||e(o+1))}(0)},e.every2=function(t,r,n){if(d(t,"predicate"),b(t,"predicate"),g(r,"source1"),g(n,"source2"),!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source1 should be Array or Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source2 should be Array or Vec.");if(r.length!==n.length)throw new TypeError("source1 and source2 have different lengths.");return function e(o){return o>=r.length||t(r[o],n[o])&&e(o+1)}(0)},e.fold2=function(t,r,n,o){if(g(r,"state"),d(t,"folder"),b(t,"folder"),g(n,"source1"),g(o,"source2"),!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source1 should be an Array or a Vec.");if(!Array.isArray(o)&&!e.isVec(o))throw new TypeError("source2 should be an Array or a Vec.");if(n.length!==o.length)throw new TypeError("source1 and source2 have different lengths.");let i=r;for(let e=0;e<n.length;e+=1)i=t(i,n[e],o[e]);return i},e.foldRight2=function(t,r,n,o){if(g(o,"state"),d(t,"folder"),b(t,"folder"),g(r,"source1"),g(n,"source2"),!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source1 should be Array or Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source2 should be Array or Vec.");if(r.length!==n.length)throw new TypeError("source1 and source2 have different lengths.");let i=o;for(let e=r.length-1;e>=0;e-=1)i=t(r[e],n[e],i);return i},e.forEach2=function(t,r,n){if(d(t,"action"),b(t,"action"),g(r,"source1"),g(n,"source2"),!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source1 should be an Array or a Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source2 should be an Array or a Vec.");if(r.length!==n.length)throw new TypeError("source1 and source2 have different lengths.");for(let e=0;e<r.length;e+=1)t(r[e],n[e],e)},e.map2=function(t,r,n){if(d(t,"mapping"),b(t,"mapping"),g(r,"source1"),g(n,"source2"),!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source1 should be an Array or a Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source2 should be an Array or a Vec.");if(r.length!==n.length)throw new TypeError("source1 and source2 have different lengths.");const o=new e(r.length);for(let e=0;e<r.length;e+=1)o[e]=t(r[e],n[e],e);return o},e.map3=function(t,r,n,o){if(d(t,"mapping"),b(t,"mapping"),g(r,"source1"),g(n,"source2"),g(o,"source2"),!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source1 should be an Array or a Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source2 should be an Array or a Vec.");if(!Array.isArray(o)&&!e.isVec(o))throw new TypeError("source3 should be an Array or a Vec.");if(r.length!==n.length||r.length!==o.length)throw new TypeError("source1, source2, and source3 have different lengths.");const i=new e(r.length);for(let e=0;e<r.length;e+=1)i[e]=t(r[e],n[e],o[e],e);return i},e.zip3=function(t,r,n){if(g(t,"source1"),g(r,"source2"),g(n,"source2"),!Array.isArray(t)&&!e.isVec(t))throw new TypeError("source1 should be an Array or a Vec.");if(!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source2 should be an Array or a Vec.");if(!Array.isArray(n)&&!e.isVec(n))throw new TypeError("source3 should be an Array or a Vec.");if(t.length!==r.length||t.length!==n.length)throw new TypeError("source1, source2, and source3 have different lengths.");const o=new e(t.length);for(let i=0;i<t.length;i+=1)o[i]=new e(t[i],r[i],n[i]);return o},e.unfold=function(t,r){g(r,"state"),d(t,"generator"),b(t,"generator");const n=new e;return function e(r){const o=t(r);if(l(o)&&f(o)){const[t,r]=o;n.push(t),l(r)&&f(r)&&e(r)}}(r),n},e.allPairs=function(t,r){if(!Array.isArray(t)&&!e.isVec(t))throw new TypeError("source1 should be an Array or a Vec.");if(!Array.isArray(r)&&!e.isVec(r))throw new TypeError("source2 should be an Array or a Vec.");const n=t.length,o=r.length,i=new e(n*o);for(let s=0;s<n;s+=1)for(let n=0;n<o;n+=1)i[s*o+n]=new e(t[s],r[n]);return i},e.prototype.isEmpty=function(){return g(this,"this"),0===this.length},e.prototype.copy=function(){return g(this,"this"),this.slice()},e.prototype.countBy=function(t){let r;g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(r=arguments[1]);const n=new Map;for(const e of this){const o=t.call(r,e);let i=1,s=!1;for(const t of n.keys())if(_(t,o)){i=n.get(t)+1,s=!0,n.set(t,i);break}s||n.set(o,i)}const o=new e;return n.forEach(((t,r)=>o.push(e.of(r,t)))),o},e.prototype.findRight=function(t){g(this,"this"),d(t,"predicate"),b(t,"predicate");const e=Object(this);let r;arguments.length>1&&(r=arguments[1]);const n=function(o){if(!(o<0))return t.call(r,e[o])?e[o]:n(o-1)};return n(this.length-1)},e.prototype.findIndexRight=function(t){g(this,"this"),d(t,"predicate"),b(t,"predicate");const e=Object(this);let r;return arguments.length>1&&(r=arguments[1]),function n(o){return o<0?-1:t.call(r,e[o])?o:n(o-1)}(this.length-1)},e.prototype.head=function(){if(g(this,"this"),!this.isEmpty())return this[0]},e.prototype.tail=function(){return g(this,"this"),this.slice(1)},e.prototype.get=function(t){return g(this,"this"),this[t]},e.prototype.set=function(t,e){return g(this,"this"),this[t]=e},e.prototype.last=function(){return g(this,"this"),this[this.length-1]},e.prototype.take=function(t){if(g(this,"this"),t<=0)return r();const n=this.length;if(t>=n)return this;const o=Object(this);let i=0;const s=new e;for(;i<t&&i!==n;)s.push(o[i]),i+=1;return s},e.prototype.takeWhile=function(t){let r;g(this,"this"),d(t,"predicate"),b(t,"predicate"),arguments.length>1&&(r=arguments[1]);const n=new e;for(const e of this){if(!t.call(r,e))break;n.push(e)}return n},e.prototype.skipWhile=function(t){let e;g(this,"this"),d(t,"predicate"),b(t,"predicate"),arguments.length>1&&(e=arguments[1]);let n=0;for(;n<this.length&&t.call(e,this[n]);)n+=1;return n===this.length?r():this.slice(n)},e.prototype.min=function(){if(g(this,"this"),0===this.length)return;let t;for(let e=1;e<this.length;e+=1)s(this[e])&&(void 0===t||this[e]<t)&&(t=this[e]);return t},e.prototype.max=function(){if(g(this,"this"),0===this.length)return;let t;for(let e=0;e<this.length;e+=1)s(this[e])&&(void 0===t||this[e]>t)&&(t=this[e]);return t},e.prototype.minBy=function(t){let e,r;if(g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(e=arguments[1]),0!==this.length){for(let n=0;n<this.length;n+=1){const o=t.call(e,this[n]);s(o)&&(void 0===r||o<r)&&(r=o)}return r}},e.prototype.maxBy=function(t){let e,r;if(g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(e=arguments[1]),0!==this.length){for(let n=0;n<this.length;n+=1){const o=t.call(e,this[n]);s(o)&&(void 0===r||o>r)&&(r=o)}return r}},e.prototype.sum=function(){if(g(this,"this"),0===this.length)return;let t=0;for(let e=0;e<this.length;e+=1)s(this[e])&&(t+=this[e]);return t},e.prototype.sumBy=function(t){let e;if(g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(e=arguments[1]),0===this.length)return;let r=0;for(let n=0;n<this.length;n+=1){const o=t.call(e,this[n]);s(o)&&(r+=o)}return r},e.prototype.average=function(){if(g(this,"this"),0===this.length)return;let t=0;for(let e=0;e<this.length;e+=1)s(this[e])&&(t+=this[e]);return t/this.length},e.prototype.averageBy=function(t){let e;if(g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(e=arguments[1]),0===this.length)return;let r=0;for(let n=0;n<this.length;n+=1){const o=t.call(e,this[n]);s(o)&&(r+=o)}return r/this.length},e.prototype.splitAt=function(t){g(this,"this"),w(t,"index");const r=Math.floor(t);if(this.length<r)throw new TypeError("The vec has an insufficient number of elements.");return 0===r?new e([],this.slice(0)):r===this.length?new e(this.slice(0),[]):new e(this.slice(0,r),this.slice(r))},e.prototype.partition=function(t){let r;g(this,"this"),d(t,"predicate"),b(t,"predicate"),arguments.length>1&&(r=arguments[1]);const n=new e,o=new e;for(const e of this)t.call(r,e)?n.push(e):o.push(e);return new e(n,o)},e.prototype.scan=function(t,e){let r;g(this,"this"),g(e,"initialState"),d(t,"folder"),b(t,"folder"),arguments.length>2&&(r=arguments[2]);let n=e;const o=A(this.length+1,e);for(let e=0;e<this.length;e+=1)n=t.call(r,n,this[e]),o[e+1]=n;return o},e.prototype.scanRight=function(t,e){let r;g(this,"this"),g(e,"initialState"),d(t,"folder"),b(t,"folder"),arguments.length>2&&(r=arguments[2]);let n=e;const o=A(this.length+1,e);for(let e=this.length-1;e>=0;e-=1)n=t.call(r,this[e],n),o[e]=n;return o},e.prototype.windowed=function(t){g(this,"this"),w(t,"windowSize");const n=Math.floor(t);if(n>this.length)return r();const o=this.length-n+1,i=new e(o);for(let t=0;t<o;t+=1)i[t]=this.slice(t,n+t);return i},e.prototype.zip=function(t){g(this,"this"),g(t,"other");const r=this.length;if(r!==t.length)throw new TypeError("other has different array length.");const n=new e(r);for(let o=0;o<r;o+=1)n[o]=new e(this[o],t[o]);return n},e.prototype.unzip=function(){g(this,"this");const t=new e(this.length),r=new e(this.length);for(let e=0;e<this.length;e+=1){const[n,o]=this[e];g(n,"f"),g(o,"s"),t[e]=n,r[e]=o}return new e(t,r)},e.prototype.distinct=function(){g(this,"this");const t=new Set;for(let e=0;e<this.length;e+=1){const r=this[e];[...t].every((t=>!_(t,r)))&&t.add(r)}return e.from(t)},e.prototype.distinctBy=function(t){let r;g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(r=arguments[1]);const n=new Set,o=new e;for(let e=0;e<this.length;e+=1){const i=this[e],s=t.call(r,i);let c=!1;for(const t of n)if(_(t,s)){c=!0;break}c||(n.add(s),o.push(i))}return o},e.prototype.pairwise=function(){return g(this,"this"),this.length<2?r():e.init(this.length-1,(t=>new e(this[t],this[t+1])))},e.prototype.except=function(...t){if(g(this,"this"),0===this.length)return this;if(0===t.length)return this.copy();const e=new Set;for(const r of t)[...e].every((t=>!_(t,r)))&&e.add(r);return this.filter((t=>[...e].every((e=>!_(e,t)))))},e.prototype.groupBy=function(t){let r;g(this,"this"),d(t,"projection"),b(t,"projection"),arguments.length>1&&(r=arguments[1]);const n=new Map;for(const o of this){const i=t.call(r,o);let s=!1;for(const t of n.keys())if(_(t,i)){n.get(t).push(o),s=!0;break}s||n.set(i,e.of(o))}const o=new e;return n.forEach(((t,r)=>o.push(e.of(r,t)))),o},e.prototype.mapFold=function(t,n){g(this,"this"),g(n,"state"),d(t,"mapping"),b(t,"mapping");let o,i=n;if(arguments.length>2&&(o=arguments[2]),0===this.length)return new e(r(),i);const s=new e(this.length);for(let e=0;e<this.length;e+=1){const[r,n]=t.call(o,i,this[e]);s[e]=r,i=n}return new e(s,i)},e.prototype.mapFoldRight=function(t,n){g(this,"this"),g(n,"state"),d(t,"mapping"),b(t,"mapping");let o,i=n;if(arguments.length>2&&(o=arguments[2]),0===this.length)return new e(r(),n);const s=new e(this.length);for(let e=this.length-1;e>=0;e-=1){const[r,n]=t.call(o,this[e],i);s[e]=r,i=n}return new e(s,i)},e.prototype.chunkBySize=function(t){g(this,"this"),w(t,"chunkSize");const n=Math.floor(t),o=this.length;if(0===o)return r();if(n>o)return new e(this.copy());const i=new e,s=Math.floor(o/n)*n;for(let t=0;t<s;t+=n)i.push(this.slice(t,t+n));return s===o||i.push(this.slice(s)),i},e.prototype.binarySearch=function(t,e){g(this,"this"),g(t,"item");const r=o(e)||i(e)?(t,e)=>t>e?1:t<e?-1:t===e?0:-1:e;if(0===this.length)return-1;let n;arguments.length>2&&(n=arguments[2]);let s=0,c=this.length-1;for(;s<=c;){const e=Math.floor((s+c)/2),o=r.call(n,this[e],t);if(0===o)return e;o<0?s=e+1:c=e-1}return-1},e.prototype.permute=function(){g(this,"this");const t=this.length;if(0===t)return r();const n=new e,o=()=>{const r=new e;for(let e=0;e<t;e+=1)r.push(this[e]);n.push(r)},i=new e(t);for(let e=0;e<t;e+=1)i[e]=0;o();let s,c=1;for(;c<t;)if(i[c]<c){s=c%2*i[c];const t=this[s];this[s]=this[c],this[c]=t,o(),i[c]+=1,c=1}else i[c]=0,c+=1;for(let e=0;e<t;e+=1)this[e]=n[0][e];return n},e.prototype.transpose=function(){if(g(this,"this"),0===this.length)return r();let t;for(let e=0;e<this.length;e+=1)if(o(t)||i(t))t=this[e].length;else if(t!==this[e].length)throw new TypeError("all Array or Vec elements of source should have the same length.");const n=new e(t),s=this.length;for(let r=0;r<t;r+=1){n[r]=new e(s);for(let t=0;t<s;t+=1)n[r][t]=this[t][r]}return n},t.Vec=e,t.isBigInt=c,t.isBoolean=a,t.isEqual=_,t.isFunction=p,t.isGeneratorFunction=y,t.isIterable=function(t){return l(t)&&f(t[Symbol.iterator])},t.isNull=o,t.isNumber=s,t.isObject=function(t){return null!=t&&"object"==typeof t},t.isPrimitive=function(t){return o(t)||i(t)||s(t)||c(t)||u(t)||h(t)||a(t)},t.isString=h,t.isSymbol=u,t.isUndefined=i,Object.defineProperty(t,"__esModule",{value:!0})}));
